{% extends 'passenger_templates/base.html' %}
{% load static %}

{% block title %}Search Bus Routes{% endblock title%}

{% block custom_css %}
<style>
  .search-content {
    background-image: url("{% static 'dist/img/buss.jpeg' %}");
    background-repeat: no-repeat;
    background-size: cover;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  }
  .overlay {
    background-color: rgba(0, 0, 0, 0.5);
    padding: 50px;
    border-radius: 15px;
  }
  .form-group {
    margin-bottom: 20px;
  }
  .btn-primary {
    background-color: #007bff;
    border-color: #007bff;
    padding: 10px 20px;
    font-size: 1.2em;
  }
  label {
    font-size: 1.2em;
  }
  .form-control {
    font-size: 1.1em;
    padding: 10px;
    border-radius: 5px;
  }
</style>
{% endblock custom_css %}

{% block body %}
<div class="search-content">
  <div class="overlay">
    <h1 class="text-center">Search Bus Routes</h1>
    <form method="get" action="{% url 'search_result' %}">
      <div class="form-group">
        <label for="origin">Departure City</label>
        <select id="origin" name="origin" class="form-control" required>
          <option value="" disabled selected>Select Origin</option>
          {% for route in routes %}
            <option value="{{ route.origin }}">{{ route.origin }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label for="destination">Destination City</label>
        <select id="destination" name="destination" class="form-control" required>
          <option value="" disabled selected>Select Destination</option>
          {% for route in routes %}
            <option value="{{ route.destination }}">{{ route.destination }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label for="date">Travel Date</label>
        <input type="date" class="form-control" id="date" name="date" required>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-primary">Search</button>
      </div>
    </form>
    {% if message %}
      <div class="alert alert-info mt-4">{{ message }}</div>
    {% endif %}
    {% if schedules %}
      <div class="mt-4">
        <h2>Available Schedules</h2>
        <ul class="list-group">
          {% for schedule in schedules %}
            <li class="list-group-item">
              <strong>Route:</strong> {{ schedule.route.origin }} to {{ schedule.route.destination }}<br>
              <strong>Departure:</strong> {{ schedule.departure_time }}<br>
              <strong>Arrival:</strong> {{ schedule.arrival_time }}<br>
              <a href="{% url 'book_seat' schedule.id %}" class="btn btn-success">Book Seat</a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
</div>
{% endblock body %}
